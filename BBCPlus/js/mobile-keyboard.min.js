"use strict";
(function(b) {
	b.fn.extend({
		mobileKeyboard: function a(d) {
			var h = this;
			d = b.extend(b.fn.mobileKeyboard.defaults, d);
			var j = {
				pointBtn: b("[data-code='.']"),
				xBtn: b("[data-code='x']"),
				emptyBtn: b("[data-code='']"),
				focusTimer: null,
				init: function i() {
					var l = this,
						n = l.emptyBtn,
						m = l.pointBtn,
						k = l.xBtn;
					switch (+d.type) {
						case 0:
							n.removeClass("hide");
							m.addClass("hide");
							k.addClass("hide");
							break;
						case 1:
							n.addClass("hide");
							m.removeClass("hide");
							k.addClass("hide");
							break;
						case 2:
							n.addClass("hide");
							m.addClass("hide");
							k.removeClass("hide");
							break
					}
					l.handleItemClick();
					l.complated();
					h.blur();
					b(".mobile-keyboard")
						.slideDown();
					b(".mobile-keyboard-shadow")
						.unbind("click")
						.bind("click", function() {
							b(".mobile-keyboard_finish > span").click();
						});
					l.simulationFocus()
				},
				handleItemClick: function f() {
					var k = this,
						l = false;
					b(".mobile-keyboard_main-item")
						.unbind("click")
						.bind("click", function() {
							if (l) {
								return false
							}
							l = true;
							k.stopSimulationFocus();
							var m = b(this)
								.data("code");
							var n = h.val();
							switch (m) {
								case ".":
									if (n.indexOf(".") === -1) {
										h.val(n + m)
                                        document.querySelector(".mobile-keyboard_finish s").textContent = h.val();
									}
									break;
								case "delete":
									h.val(n.substr(0, n.length - 1));
                                    document.querySelector(".mobile-keyboard_finish s").textContent = h.val();
									break;
								default:
									h.val(n + m);
                                    document.querySelector(".mobile-keyboard_finish s").textContent = h.val();
							}
							k.simulationFocus();
							l = false;
							return false
						})
				},
				simulationFocus: function g() {
					var k = this;
					k.focusTimer = setInterval(function() {
						if (h.val()
							.indexOf("|") !== -1) {
							h.val(h.val()
								.substr(0, h.val()
									.length - 1))
						} else {
							h.val(h.val() + "|")
						}
					}, 500)
				},
				stopSimulationFocus: function c() {
					var k = this;
					clearInterval(k.focusTimer);
					h.val(h.val()
						.replace(/\|/, ""))
				},
				complated: function e() {
					var k = this;
					b(".mobile-keyboard_finish > span")
						.unbind("click")
						.bind("click", function() {
							k.stopSimulationFocus();
							if (+d.type === 1 && !!h.val()) {
								h.val(+h.val())
							}
							b(".mobile-keyboard")
								.slideUp();
							return false
						})
				}
			};
			j.init()
		}
	});
	b("body").append(`<div class="mobile-keyboard">
                            <div class="mobile-keyboard_finish">
                                <b>清空</b>
                                <s></s>
                                <span>完成</span>
                            </div>
                            <div class="mobile-keyboard_main">
                                <div class="mobile-keyboard_main-item" data-code="1">1</div>
                                <div class="mobile-keyboard_main-item" data-code="2">2</div>
                                <div class="mobile-keyboard_main-item" data-code="3">3</div>
                                <div class="mobile-keyboard_main-item" data-code="4">4</div>
                                <div class="mobile-keyboard_main-item" data-code="5">5</div>
                                <div class="mobile-keyboard_main-item" data-code="6">6</div>
                                <div class="mobile-keyboard_main-item" data-code="7">7</div>
                                <div class="mobile-keyboard_main-item" data-code="8">8</div>
                                <div class="mobile-keyboard_main-item" data-code="9">9</div>
                                <div class="mobile-keyboard_main-item" data-code=""></div>
                                <div class="mobile-keyboard_main-item hide" data-code=".">.</div>
                                <div class="mobile-keyboard_main-item hide" data-code="x">x</div>
                                <div class="mobile-keyboard_main-item" data-code="0">0</div>
                                <div class="mobile-keyboard_main-item" data-code="delete"></div>
                            </div>
                            <div class="mobile-keyboard-shadow"></div>
                    </div>`);
        document.querySelector(".mobile-keyboard_finish b").addEventListener('click', function () {
            document.querySelector("#identityCard").value = "";
            document.querySelector(".mobile-keyboard_finish s").textContent = "";
        })
	b.fn.mobileKeyboard.defaults = {
		type: 0
	}
})(jQuery);